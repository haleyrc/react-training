import { Notes } from 'mdx-deck'
import { Invert, SplitRight, Split, FullScreenCode } from 'mdx-deck/layouts'
export {combinedThemes as themes} from 'theme'


# Welcome to React quick start!

---

## Overview

<Notes>
Developed by Facebook, initially release May 2013

Framework for building user interfaces

Organized as a tree of components (more on this later)

Create reusable, single-purpose components

Easy to test

Handles data binding

Handles listeners

Most importantly, handles DOM updates in the quickest way possible
</Notes>

---

### create-react-app

```bash
.
â”œâ”€â”€ node_modules
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”œâ”€â”€ README.md
â”œâ”€â”€ src
â””â”€â”€ yarn.lock
```

---

### index.html

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="theme-color" content="#000000" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>React App</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
```

---

### index.js

```js
import React from "react"
import ReactDOM from "react-dom"

ReactDOM.render(<h1>Hello, world!</h1>, document.getElementById("root"))
```

<Notes>
The h1 looks like html, but is actually JSX

Javascript XML extension to JS syntax, compiled to JS
</Notes>

---

## JSX

---

### Under the hood

```js
React.createElement("h1", null, "Hello, world!");
```

<Notes>
JSX elements get compiled to javascript calls that create VDOM elements

Takes type, arguments(props) and children

Used to be written entirely this way
</Notes>

---

### Under the hood

```jsx
<h1 type="notice">
  <div>Hello, world!</div>
  <div>Goodbye!</div>
</h1>
```

becomes:

```js
React.createElement(
  "h1",
  {
    type: "notice"
  },
  React.createElement("div", null, "Hello, world!"),
  React.createElement("div", null, "Goodbye!")
);
```

---

### Component Tree

![](./public/component_tree.png)

<Notes>
The elements from the previous slide become this component tree

Important: changes to one div *don't* rerender the other
</Notes>

---

## Components

---

import {UselessCounter} from './components/Counter'

### The basics

```jsx
class UselessCounter extends Component {
  render() {
    return (
      <div>
        <div>0</div>
        <button>-</button>
        <button>+</button>
      </div>
    )
  }
}
```

<UselessCounter />

---

import {StatefulCounter} from './components/Counter'

### State

```jsx
class StatefulCounter extends Component {
  state = {
    count: 0
  }
  render() {
    const { count } = this.state
    return (
      <div>
        <div>{count}</div>
        <button>-</button>
        <button>+</button>
      </div>
    )
  }
}
```

<StatefulCounter />

---

import {Counter} from './components/Counter'

### Events

```jsx
class Counter extends Component {
  state = {
    count: 0
  }
  render() {
    const { count } = this.state
    return (
      <div>
        <div>{count}</div>
        <button onClick={() => this.setState({ count: count - 1 })}>-</button>
        <button onClick={() => this.setState({ count: count + 1 })}>+</button>
      </div>
    )
  }
}
```

<Counter />

---

import {PropsCounter} from './components/Counter'

### Props

```jsx
class PropsCounter extends Component {
  state = {
    count: 0
  }
  render() {
    const { count } = this.state
    const { step } = this.props
    return (
      <div>
        <div>{count}</div>
        <button onClick={() => this.setState({ count: count - step })}>
          -
        </button>
        <button onClick={() => this.setState({ count: count + step })}>
          +
        </button>
      </div>
    )
  }
}
```

---

### Example

```jsx
<PropsCounter step={1}/>
<PropsCounter step={2}/>
<PropsCounter step={20}/>
```

<div style={{ display: "flex", justifyContent: "space-between" }}>
  <div>
    <h4>step=1</h4>
    <PropsCounter step={1}/>
  </div>
  <div style={{marginLeft: "20px", marginRight: "20px"}}>
    <h4>step=2</h4>
    <PropsCounter step={2}/>
  </div>
  <div>
    <h4>step=20</h4>
    <PropsCounter step={20}/>
  </div>
</div>

---

import { RainbowCounter } from './components/Counter'

### Virtual DOM

<RainbowCounter step={1}/>
<RainbowCounter step={2}/>
<RainbowCounter step={20}/>

---

## Lifecycle Methods

---

### Current

```
class MyComponent extends React.Component {
  constructor() {
    // Not generally used unless you need to initialize state or bind methods
  }
  render() {
    // Returns the actual JSX to render
  }
  componentDidMount() {
    // Do some work to get data, compute properties, etc.
  }
  componentDidUpdate() {
    // Useful for skipping renders based on props, but have to be careful
  }
  componentWillUnmount() {
    // Clean up event listeners, connections, timers, etc.
  }
```

<Notes>
Constructor can be used to initialize state, but that's usually done as a static
property now, and binding methods can be avoided with use of arrow functions, so
not seen much at all in new projects
</Notes>

---

### Lifecycle Methods: Example

```jsx
class Inventory extends React.Component {
  state = {
    loading: true,
    error: null,
    vehicles: []
  }
  async componentDidMount() {
    try {
      const vehicles = await vehicleService.List()
      this.setState({ loading: false, vehicles })
    } catch (error) {
      this.setState({ loading: false, error })
    }
  }
  render() {
    const { loading, error, vehicle } = this.state
    if (loading) return <div>Loading...</div>
    if (error) return <div>Error getting vehicles: {error}</div>
    return (
      <VehicleList vehicles={vehicles} />
    )
  }
}
```

---

### Future

Hooks (more on this later)

---

## Functional Stateless Components

<Notes>Functions that return JSX</Notes>

---

import {Button} from './components/Button'

### Functional Stateless Components: Example

```jsx
const Button = ({title, handleOnClick}) => (
  <button onClick={handleOnClick}>{title}</button>
)
```

How do you use one?

```jsx
<Button title="Click Me" handleOnClick={() => alert("hello")} />
<Button title="Don't Click Me" />
```

<Button title="Click Me" handleOnClick={() => alert("hello")} />
<br />
<Button title="Don't Click Me" />

---

import { CounterWithButtons } from './components/Counter'

### Better Example

<CounterWithButtons />

---

### Better Example

```jsx
class CounterWithButtons extends Component {
  state = {
    count: 0
  }
  render() {
    const { count } = this.state
    return (
      <div>
        <div>{count}</div>
        <Button
          title="-"
          handleOnClick={() => this.setState({ count: count - 1 })}
        />
        <Button
          title="+"
          handleOnClick={() => this.setState({ count: count + 1 })}
        />
      </div>
    )
  }
}
```

---

### Aside: CSS In JS

```jsx
const ButtonStyles = styled.button`
  background: #ffd600;
  font-size: 28px;
  font-weight: bold;
  padding: 10px 20px;
  margin: 5px;
  border: none;
  outline: none;
  :hover {
    box-shadow: 0 2px 8px #21212133;
    cursor: pointer;
  }
  :active {
    box-shadow: 0 1px 3px #21212133;
  }
`

const StyledButton = ({ title, handleOnClick }) => (
  <ButtonStyles onClick={handleOnClick}>{title}</ButtonStyles>
)
```

---

### Better Example: With Style

```jsx
class CounterWithPrettyButtons extends Component {
  state = {
    count: 0
  }
  render() {
    const { count } = this.state
    return (
      <div>
        <div>{count}</div>
        <StyledButton
          title="-"
          handleOnClick={() => this.setState({ count: count - 1 })}
        />
        <StyledButton
          title="+"
          handleOnClick={() => this.setState({ count: count + 1 })}
        />
      </div>
    )
  }
}
```

---

import { CounterWithPrettyButtons } from './components/Counter'

### ðŸŽ‰ Ooh Aaaah ðŸŽ‰

<CounterWithPrettyButtons />

---

## Hooks

---

import { SelfAwareButton } from './components/Button'

### useState

```jsx
const SelfAwareButton = () => {
  const [clicked, setClicked] = useState(0)
  const title = "Clicked " + clicked + "times."
  return (
    <StyledButton
      handleOnClick={() => setClicked(clicked + 1)}
      title={title}
    />
  )
}
```

<SelfAwareButton />

---

### useEffect

```jsx
useEffect(() => {
  window.addEventListener('keydown', downHandler);
  window.addEventListener('keyup', upHandler);
  // Remove event listeners on cleanup
  return () => {
    window.removeEventListener('keydown', downHandler);
    window.removeEventListener('keyup', upHandler);
  };
}, []);
```

---

import App from './components/Context'

### useContext

```jsx
const LoggedInContext = React.createContext()

const App = () => {
  const [loggedIn, setLoggedIn] = useState(false)
  return (
    <LoggedInContext.Provider value={loggedIn}>
      <Toggle isLoggedIn={loggedIn} onToggle={() => setLoggedIn(!loggedIn)} />
      <div>I'm available to everyone</div>
      <SecureDiv />
    </LoggedInContext.Provider>
  )
}
```

<Notes>
Create context near top of the app

Wrap entire app in provider
</Notes>

---

### useContext: Current

```jsx
const SecureDiv = () => (
  <LoggedInContext.Consumer>
    {(isLoggedIn) =>
      isLoggedIn ? (
        <div>Visible only when logged in</div>
      ) : (
        <div>Please login to view</div>
      )
    }
  </LoggedInContext.Consumer>
)
```

<Notes>When you need the value, use the consumer and a render prop</Notes>

---

### useContext: With hooks

```jsx
const SecureDiv = () => {
  const isLoggedIn = useContext(LoggedInContext)
  return isLoggedIn ? (
    <div>Visible only when logged in</div>
  ) : (
    <div>Please login to view</div>
  )
}
```

---

<App />
